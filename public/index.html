<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ê–≥—Ä–µ–≥–∞—Ç–æ—Ä –¥–ª—è —Ä–∞–π–æ–Ω–∞</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--glass-bg:rgba(255,255,255,0.1);--glass-border:rgba(255,255,255,0.2);--text:#1a1a1a;--text-gray:#666;--active:#0088cc;--shadow:rgba(0,0,0,0.1);
}
[data-theme="dark"]{
--glass-bg:rgba(255,255,255,0.05);--glass-border:rgba(255,255,255,0.1);--text:#fff;--text-gray:#aaa;--active:#64b5f6;--shadow:rgba(0,0,0,0.3);
}
body{
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
margin:0;padding:0 0 80px 0;
background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
color:var(--text);min-height:100vh;
}
body[data-theme="dark"]{
background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);
}
.header{
display:flex;justify-content:space-between;align-items:center;padding:16px 20px;
background:var(--glass-bg);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
border-bottom:1px solid var(--glass-border);position:sticky;top:0;z-index:100;
box-shadow:0 8px 32px 0 var(--shadow);
}
.logo{font-size:28px;text-decoration:none;line-height:1;transition:transform 0.3s}
.logo:hover{transform:scale(1.1) rotate(-5deg)}
h3{font-size:18px;font-weight:600;color:var(--text)}
.theme-btn{
background:var(--glass-bg);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
border:1px solid var(--glass-border);border-radius:50%;width:40px;height:40px;
cursor:pointer;font-size:20px;transition:all 0.3s;display:flex;align-items:center;justify-content:center;
}
.theme-btn:hover{transform:scale(1.1);box-shadow:0 8px 16px var(--shadow)}
.subtitle{
color:var(--text-gray);font-size:13px;padding:8px 20px;text-align:center;
background:var(--glass-bg);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
margin:12px 8px;border-radius:12px;border:1px solid var(--glass-border);
}
.card{
background:var(--glass-bg);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
border:1px solid var(--glass-border);border-radius:20px;margin:12px 8px;padding:0;
box-shadow:0 8px 32px 0 var(--shadow);overflow:hidden;transition:all 0.3s;
}
.card:hover{transform:translateY(-4px);box-shadow:0 12px 48px 0 var(--shadow)}
.meta{color:var(--text-gray);font-size:12px;padding:12px 16px 8px 16px}
.text{
line-height:1.5;padding:0 16px 16px 16px;font-size:15px;word-wrap:break-word;color:var(--text);
}
.text a{color:var(--active);text-decoration:none;font-weight:500}
.text a:hover{text-decoration:underline}
img{max-width:100%;width:100%;display:block;margin:0}
.nav{
position:fixed;bottom:0;left:50%;transform:translateX(-50%);max-width:600px;width:calc(100% - 16px);
background:var(--glass-bg);backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px);
border:1px solid var(--glass-border);border-radius:24px 24px 0 0;
display:flex;justify-content:space-around;padding:12px 0 8px 0;
box-shadow:0 -8px 32px 0 var(--shadow);z-index:1000;
}
.nav-item{
flex:1;text-align:center;padding:10px 8px;cursor:pointer;color:var(--text-gray);
font-size:14px;font-weight:500;transition:all 0.3s;border:none;background:transparent;
border-radius:12px;margin:0 4px;
}
.nav-item.active{
color:var(--active);background:var(--glass-bg);font-weight:600;
box-shadow:0 4px 12px var(--shadow);
}
.nav-item:hover{color:var(--active);transform:scale(1.05)}
.hidden{display:none}
@media(min-width:768px){
body{max-width:600px;margin:0 auto;padding:0 0 80px 0}
.card{margin:12px 0}
img{border-radius:16px}
.nav{border-radius:24px;bottom:12px;width:calc(100% - 32px);max-width:600px}
}
</style>
</head>
<body>
<div class="header">
<a href="https://t.me/ispanskie_msk" target="_blank" class="logo">üèòÔ∏è</a>
<div><h3>–ê–≥—Ä–µ–≥–∞—Ç–æ—Ä –¥–ª—è —Ä–∞–π–æ–Ω–∞</h3></div>
<button class="theme-btn" onclick="toggleTheme()" aria-label="Toggle theme">üåô</button>
</div>
<p class="subtitle">by –ò—Å–ø–∞–Ω—Å–∫–∏–µ –ö–≤–∞—Ä—Ç–∞–ª—ã | –ü—Ä–æ–∫—à–∏–Ω–æ</p>
<div id="list"></div>
<div class="nav">
<button class="nav-item active" onclick="filterCategory('all')" data-category="all">–ù–æ–≤–æ—Å—Ç–∏</button>
<button class="nav-item" onclick="filterCategory('business')" data-category="business">–ë–∏–∑–Ω–µ—Å</button>
<button class="nav-item" onclick="filterCategory('recommendations')" data-category="recommendations">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</button>
</div>
<script>
var allNews=[];
var currentCategory='all';
function setTheme(t){
document.documentElement.setAttribute('data-theme',t);
var btn=document.querySelector('.theme-btn');
btn.textContent=t==='dark'?'‚òÄÔ∏è':'üåô';
localStorage.setItem('theme',t);
}
function toggleTheme(){
var current=document.documentElement.getAttribute('data-theme')||'light';
setTheme(current==='dark'?'light':'dark');
}
function linkify(text){
var urlRegex=/(https?:\/\/[^\s]+)/g;
return text.replace(urlRegex,function(url){
return '<a href="'+url+'" target="_blank" rel="noopener">'+url+'</a>';
});
}
function filterCategory(cat){
currentCategory=cat;
document.querySelectorAll('.nav-item').forEach(function(item){
item.classList.remove('active');
});
document.querySelector('[data-category="'+cat+'"]').classList.add('active');
renderNews();
}
function renderNews(){
var el=document.getElementById('list');
var filtered=currentCategory==='all'?allNews:allNews.filter(function(p){return p.category===currentCategory});
if(filtered.length===0){
el.innerHTML='<div class="card"><div class="text">–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.</div></div>';
return;
}
el.innerHTML='';
filtered.forEach(function(p){
var card=document.createElement('div');
card.className='card';
if(p.photoFileId){
var img=document.createElement('img');
img.src='/api/photo/'+p.photoFileId;
img.alt='—Ñ–æ—Ç–æ';
card.appendChild(img);
}
var meta=document.createElement('div');
meta.className='meta';
var date=new Date(p.createdAt).toLocaleString('ru-RU');
meta.textContent='#'+p.id+' ¬∑ '+date+' ¬∑ '+p.category;
card.appendChild(meta);
var text=document.createElement('div');
text.className='text';
text.innerHTML=linkify(p.text);
card.appendChild(text);
el.appendChild(card);
});
}
var saved=localStorage.getItem('theme');
if(saved){setTheme(saved);}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){setTheme('dark');}
fetch('/api/news').then(function(r){return r.json()}).then(function(data){
if(data.posts && data.posts.length){
el=document.getElementById('list');
el.innerHTML='<div class="card"><div class="text">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...</div></div>';
}
allNews=data.posts.map(function(p){return Object.assign({},p,{category:p.category||'all'})});
renderNews();
}).catch(function(err){
console.error('Error loading news:',err);
document.getElementById('list').innerHTML='<div class="card"><div class="text">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.</div></div>';
});
</script>
</body>
</html>
